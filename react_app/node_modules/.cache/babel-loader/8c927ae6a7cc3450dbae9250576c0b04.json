{"ast":null,"code":"import React from'react';import'./App.css';import{ZoomMtg}from'@zoomus/websdk';// import MyForm from './components/form';\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var bodyParser=require('body-parser');var crypto=require('crypto');var cors=require('cors');var KJUR=require('jsrsasign');ZoomMtg.setZoomJSLib('https://source.zoom.us/2.4.0/lib','/av');ZoomMtg.preLoadWasm();ZoomMtg.prepareWebSDK();// loads language files, also passes any error messages to the ui\nZoomMtg.i18n.load('en-US');ZoomMtg.i18n.reload('en-US');function App(){var API_KEY='pnnUcpQSS4-aV1pPrFi9Ng';var API_SEC='hnZYNbmowkIs039SJE3MKx6umc4p29YxbA6H';var ZOOM_SDK_KEY='RnGHHOJG8zC3K0WTOuAltmjmMye0NT0HsHbW';var ZOOM_SDK_SECRET='RIJMIRrDa5LEVUlUjf0KC1T5pVUuhR0zBKL0';// setup your signature endpoint here: https://github.com/zoom/meetingsdk-sample-signature-node.js\nvar signatureEndpoint='http://localhost:4000/';var createMeetingEndpoint='https://54.165.82.130/createmeeting';var getMeetingEndpoint='https://54.165.82.130/get_meetings';// This Sample App has been updated to use SDK App type credentials https://marketplace.zoom.us/docs/guides/build/sdk-app\nvar sdkKey='RnGHHOJG8zC3K0WTOuAltmjmMye0NT0HsHbW';var meetingNumber='86359361045';var role=1;var leaveUrl='https://Pusse-01.github.io/zoom_integration_react_app';var userName='User';var userEmail='meulabs.sl@gmail.com';var passWord='';// pass in the registrant's token if your meeting or webinar requires registration. More info here:\n// Meetings: https://marketplace.zoom.us/docs/sdk/native-sdks/web/client-view/meetings#join-registered\n// Webinars: https://marketplace.zoom.us/docs/sdk/native-sdks/web/client-view/webinars#join-registered\nvar registrantToken='';function get_meetings(){fetch(getMeetingEndpoint,{method:'GET'}).then(function(res){return res.json();}).then(function(response){// console.log(response);\n// meetingNumber = response;\nvar signature=createSignature(parseInt(response));console.log(response);startMeeting(signature,parseInt(response));return response;}).catch(function(error){console.error(error);});}function create_meeting(){fetch(createMeetingEndpoint,{method:'POST',body:JSON.stringify({topic:\"TestA\",agenda:\"testA\",start_date:\"2022-06-04\",start_time:\"15:59:00Z\"})}).then(function(res){return res.json();}).then(function(response){console.log(response);}).catch(function(error){console.error(error);});}// function getSignature() {\n//   fetch(signatureEndpoint, {\n//     method: 'POST',\n//     headers: { 'Content-Type': 'application/json' },\n//     body: JSON.stringify({\n//       meetingNumber: meetingNumber,\n//       role: role\n//     })\n//   }).then(res => res.json())\n//   .then(response => {\n//     startMeeting(response.signature)\n//   }).catch(error => {\n//     console.error(error)\n//   })\n// }\nfunction createSignature(meetingNumber){var iat=Math.round(new Date().getTime()/1000)-30;var exp=iat+60*60*2;var oHeader={alg:'HS256',typ:'JWT'};var oPayload={sdkKey:ZOOM_SDK_KEY,mn:meetingNumber,role:role,iat:iat,exp:exp,appKey:ZOOM_SDK_SECRET,tokenExp:iat+60*60*2};var sHeader=JSON.stringify(oHeader);var sPayload=JSON.stringify(oPayload);var signature=KJUR.jws.JWS.sign('HS256',sHeader,sPayload,ZOOM_SDK_SECRET);return signature;}function startMeeting(signature,meetingID){document.getElementById('zmmtg-root').style.display='block';ZoomMtg.init({leaveUrl:leaveUrl,success:function success(_success){console.log(_success);ZoomMtg.join({signature:signature,meetingNumber:meetingID,userName:userName,sdkKey:sdkKey,userEmail:userEmail,passWord:passWord,tk:registrantToken,success:function success(_success2){console.log(_success2);ZoomMtg.record({record:true});},error:function error(_error){console.log(_error);}});},error:function error(_error2){console.log(_error2);}});}function join_meeting(){var signature=createSignature(meetingNumber);startMeeting(signature,meetingNumber);}return/*#__PURE__*/_jsx(\"div\",{className:\"App\",children:/*#__PURE__*/_jsxs(\"main\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Zoom Meeting SDK Sample React\"}),/*#__PURE__*/_jsx(\"button\",{onClick:join_meeting,children:\"Start Meeting\"})]})});}export default App;","map":{"version":3,"sources":["D:/Projects/zoom_integration_react_app/react_app/src/App.js"],"names":["React","ZoomMtg","bodyParser","require","crypto","cors","KJUR","setZoomJSLib","preLoadWasm","prepareWebSDK","i18n","load","reload","App","API_KEY","API_SEC","ZOOM_SDK_KEY","ZOOM_SDK_SECRET","signatureEndpoint","createMeetingEndpoint","getMeetingEndpoint","sdkKey","meetingNumber","role","leaveUrl","userName","userEmail","passWord","registrantToken","get_meetings","fetch","method","then","res","json","response","signature","createSignature","parseInt","console","log","startMeeting","catch","error","create_meeting","body","JSON","stringify","topic","agenda","start_date","start_time","iat","Math","round","Date","getTime","exp","oHeader","alg","typ","oPayload","mn","appKey","tokenExp","sHeader","sPayload","jws","JWS","sign","meetingID","document","getElementById","style","display","init","success","join","tk","record","join_meeting"],"mappings":"AAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAO,WAAP,CACA,OAASC,OAAT,KAAwB,gBAAxB,CACA;wFACA,GAAMC,CAAAA,UAAU,CAAGC,OAAO,CAAC,aAAD,CAA1B,CACA,GAAMC,CAAAA,MAAM,CAAGD,OAAO,CAAC,QAAD,CAAtB,CACA,GAAME,CAAAA,IAAI,CAAGF,OAAO,CAAC,MAAD,CAApB,CACA,GAAMG,CAAAA,IAAI,CAAGH,OAAO,CAAC,WAAD,CAApB,CAEAF,OAAO,CAACM,YAAR,CAAqB,kCAArB,CAAyD,KAAzD,EAEAN,OAAO,CAACO,WAAR,GACAP,OAAO,CAACQ,aAAR,GACA;AACAR,OAAO,CAACS,IAAR,CAAaC,IAAb,CAAkB,OAAlB,EACAV,OAAO,CAACS,IAAR,CAAaE,MAAb,CAAoB,OAApB,EAEA,QAASC,CAAAA,GAAT,EAAe,CAEb,GAAIC,CAAAA,OAAO,CAAG,wBAAd,CACA,GAAIC,CAAAA,OAAO,CAAG,sCAAd,CACA,GAAIC,CAAAA,YAAY,CAAG,sCAAnB,CACA,GAAIC,CAAAA,eAAe,CAAG,sCAAtB,CACA;AACA,GAAIC,CAAAA,iBAAiB,CAAG,wBAAxB,CACA,GAAIC,CAAAA,qBAAqB,CAAG,qCAA5B,CACA,GAAIC,CAAAA,kBAAkB,CAAG,oCAAzB,CACA;AACA,GAAIC,CAAAA,MAAM,CAAG,sCAAb,CACA,GAAIC,CAAAA,aAAa,CAAG,aAApB,CACA,GAAIC,CAAAA,IAAI,CAAG,CAAX,CACA,GAAIC,CAAAA,QAAQ,CAAG,uDAAf,CACA,GAAIC,CAAAA,QAAQ,CAAG,MAAf,CACA,GAAIC,CAAAA,SAAS,CAAG,sBAAhB,CACA,GAAIC,CAAAA,QAAQ,CAAG,EAAf,CACA;AACA;AACA;AACA,GAAIC,CAAAA,eAAe,CAAG,EAAtB,CAGF,QAASC,CAAAA,YAAT,EAAwB,CACtBC,KAAK,CAACV,kBAAD,CAAqB,CACtBW,MAAM,CAAE,KADc,CAArB,CAAL,CAEKC,IAFL,CAEU,SAAAC,GAAG,QAAIA,CAAAA,GAAG,CAACC,IAAJ,EAAJ,EAFb,EAGGF,IAHH,CAGQ,SAAAG,QAAQ,CAAI,CAChB;AACA;AACA,GAAMC,CAAAA,SAAS,CAAGC,eAAe,CAACC,QAAQ,CAACH,QAAD,CAAT,CAAjC,CACAI,OAAO,CAACC,GAAR,CAAYL,QAAZ,EACAM,YAAY,CAACL,SAAD,CAAWE,QAAQ,CAACH,QAAD,CAAnB,CAAZ,CACA,MAAOA,CAAAA,QAAP,CACD,CAVH,EAUKO,KAVL,CAUW,SAAAC,KAAK,CAAI,CAChBJ,OAAO,CAACI,KAAR,CAAcA,KAAd,EACD,CAZH,EAaD,CAED,QAASC,CAAAA,cAAT,EAA0B,CACxBd,KAAK,CAACX,qBAAD,CAAwB,CACzBY,MAAM,CAAE,MADiB,CAEzBc,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CACvBC,KAAK,CAAE,OADgB,CAEvBC,MAAM,CAAC,OAFgB,CAGvBC,UAAU,CAAC,YAHY,CAIvBC,UAAU,CAAE,WAJW,CAAf,CAFmB,CAAxB,CAAL,CAQKnB,IARL,CAQU,SAAAC,GAAG,QAAIA,CAAAA,GAAG,CAACC,IAAJ,EAAJ,EARb,EASGF,IATH,CASQ,SAAAG,QAAQ,CAAI,CAChBI,OAAO,CAACC,GAAR,CAAYL,QAAZ,EACD,CAXH,EAWKO,KAXL,CAWW,SAAAC,KAAK,CAAI,CAChBJ,OAAO,CAACI,KAAR,CAAcA,KAAd,EACD,CAbH,EAcD,CAEC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,QAASN,CAAAA,eAAT,CAAyBf,aAAzB,CAAuC,CACrC,GAAM8B,CAAAA,GAAG,CAAGC,IAAI,CAACC,KAAL,CAAW,GAAIC,CAAAA,IAAJ,GAAWC,OAAX,GAAuB,IAAlC,EAA0C,EAAtD,CACF,GAAMC,CAAAA,GAAG,CAAGL,GAAG,CAAG,GAAK,EAAL,CAAU,CAA5B,CAEA,GAAMM,CAAAA,OAAO,CAAG,CAAEC,GAAG,CAAE,OAAP,CAAgBC,GAAG,CAAE,KAArB,CAAhB,CAEA,GAAMC,CAAAA,QAAQ,CAAG,CACfxC,MAAM,CAAEL,YADO,CAEf8C,EAAE,CAAExC,aAFW,CAGfC,IAAI,CAAEA,IAHS,CAIf6B,GAAG,CAAEA,GAJU,CAKfK,GAAG,CAAEA,GALU,CAMfM,MAAM,CAAE9C,eANO,CAOf+C,QAAQ,CAAEZ,GAAG,CAAG,GAAK,EAAL,CAAU,CAPX,CAAjB,CAUA,GAAMa,CAAAA,OAAO,CAAGnB,IAAI,CAACC,SAAL,CAAeW,OAAf,CAAhB,CACA,GAAMQ,CAAAA,QAAQ,CAAGpB,IAAI,CAACC,SAAL,CAAec,QAAf,CAAjB,CACA,GAAMzB,CAAAA,SAAS,CAAG9B,IAAI,CAAC6D,GAAL,CAASC,GAAT,CAAaC,IAAb,CAAkB,OAAlB,CAA2BJ,OAA3B,CAAoCC,QAApC,CAA8CjD,eAA9C,CAAlB,CACA,MAAOmB,CAAAA,SAAP,CACD,CAEC,QAASK,CAAAA,YAAT,CAAsBL,SAAtB,CAAiCkC,SAAjC,CAA4C,CAC1CC,QAAQ,CAACC,cAAT,CAAwB,YAAxB,EAAsCC,KAAtC,CAA4CC,OAA5C,CAAsD,OAAtD,CAEAzE,OAAO,CAAC0E,IAAR,CAAa,CACXnD,QAAQ,CAAEA,QADC,CAEXoD,OAAO,CAAE,iBAACA,QAAD,CAAa,CACpBrC,OAAO,CAACC,GAAR,CAAYoC,QAAZ,EAEA3E,OAAO,CAAC4E,IAAR,CAAa,CACXzC,SAAS,CAAEA,SADA,CAEXd,aAAa,CAAEgD,SAFJ,CAGX7C,QAAQ,CAAEA,QAHC,CAIXJ,MAAM,CAAEA,MAJG,CAKXK,SAAS,CAAEA,SALA,CAMXC,QAAQ,CAAEA,QANC,CAOXmD,EAAE,CAAElD,eAPO,CAQXgD,OAAO,CAAE,iBAACA,SAAD,CAAa,CACpBrC,OAAO,CAACC,GAAR,CAAYoC,SAAZ,EACA3E,OAAO,CAAC8E,MAAR,CAAe,CACXA,MAAM,CAAE,IADG,CAAf,EAGD,CAbU,CAcXpC,KAAK,CAAE,eAACA,MAAD,CAAW,CAChBJ,OAAO,CAACC,GAAR,CAAYG,MAAZ,EACD,CAhBU,CAAb,EAmBD,CAxBU,CAyBXA,KAAK,CAAE,eAACA,OAAD,CAAW,CAChBJ,OAAO,CAACC,GAAR,CAAYG,OAAZ,EACD,CA3BU,CAAb,EA6BD,CAKH,QAASqC,CAAAA,YAAT,EAAuB,CACrB,GAAM5C,CAAAA,SAAS,CAAGC,eAAe,CAACf,aAAD,CAAjC,CACAmB,YAAY,CAACL,SAAD,CAAYd,aAAZ,CAAZ,CAED,CAEC,mBACE,YAAK,SAAS,CAAC,KAAf,uBACE,qCACE,qDADF,cAEE,eAAQ,OAAO,CAAE0D,YAAjB,2BAFF,GADF,EADF,CAkBD,CAED,cAAenE,CAAAA,GAAf","sourcesContent":["import React from 'react';\r\nimport './App.css';\r\nimport { ZoomMtg } from '@zoomus/websdk';\r\n// import MyForm from './components/form';\r\nconst bodyParser = require('body-parser')\r\nconst crypto = require('crypto')\r\nconst cors = require('cors')\r\nconst KJUR = require('jsrsasign')\r\n\r\nZoomMtg.setZoomJSLib('https://source.zoom.us/2.4.0/lib', '/av');\r\n\r\nZoomMtg.preLoadWasm();\r\nZoomMtg.prepareWebSDK();\r\n// loads language files, also passes any error messages to the ui\r\nZoomMtg.i18n.load('en-US');\r\nZoomMtg.i18n.reload('en-US');\r\n\r\nfunction App() {\r\n\r\n  var API_KEY = 'pnnUcpQSS4-aV1pPrFi9Ng'\r\n  var API_SEC = 'hnZYNbmowkIs039SJE3MKx6umc4p29YxbA6H'\r\n  var ZOOM_SDK_KEY = 'RnGHHOJG8zC3K0WTOuAltmjmMye0NT0HsHbW'\r\n  var ZOOM_SDK_SECRET = 'RIJMIRrDa5LEVUlUjf0KC1T5pVUuhR0zBKL0'\r\n  // setup your signature endpoint here: https://github.com/zoom/meetingsdk-sample-signature-node.js\r\n  var signatureEndpoint = 'http://localhost:4000/'\r\n  var createMeetingEndpoint = 'https://54.165.82.130/createmeeting'\r\n  var getMeetingEndpoint = 'https://54.165.82.130/get_meetings'\r\n  // This Sample App has been updated to use SDK App type credentials https://marketplace.zoom.us/docs/guides/build/sdk-app\r\n  var sdkKey = 'RnGHHOJG8zC3K0WTOuAltmjmMye0NT0HsHbW'\r\n  var meetingNumber = '86359361045'\r\n  var role = 1\r\n  var leaveUrl = 'https://Pusse-01.github.io/zoom_integration_react_app'\r\n  var userName = 'User'\r\n  var userEmail = 'meulabs.sl@gmail.com'\r\n  var passWord = ''\r\n  // pass in the registrant's token if your meeting or webinar requires registration. More info here:\r\n  // Meetings: https://marketplace.zoom.us/docs/sdk/native-sdks/web/client-view/meetings#join-registered\r\n  // Webinars: https://marketplace.zoom.us/docs/sdk/native-sdks/web/client-view/webinars#join-registered\r\n  var registrantToken = ''\r\n\r\n\r\nfunction get_meetings() {\r\n  fetch(getMeetingEndpoint, {\r\n      method: 'GET'\r\n    }).then(res => res.json())\r\n    .then(response => {\r\n      // console.log(response);\r\n      // meetingNumber = response;\r\n      const signature = createSignature(parseInt(response));\r\n      console.log(response)\r\n      startMeeting(signature,parseInt(response))\r\n      return response;\r\n    }).catch(error => {\r\n      console.error(error)\r\n    })\r\n}\r\n\r\nfunction create_meeting() {\r\n  fetch(createMeetingEndpoint, {\r\n      method: 'POST',\r\n      body: JSON.stringify({\r\n    topic: \"TestA\",\r\n    agenda:\"testA\",\r\n    start_date:\"2022-06-04\",\r\n    start_time: \"15:59:00Z\"\r\n})\r\n    }).then(res => res.json())\r\n    .then(response => {\r\n      console.log(response)\r\n    }).catch(error => {\r\n      console.error(error)\r\n    })\r\n}\r\n\r\n  // function getSignature() {\r\n  //   fetch(signatureEndpoint, {\r\n  //     method: 'POST',\r\n  //     headers: { 'Content-Type': 'application/json' },\r\n  //     body: JSON.stringify({\r\n  //       meetingNumber: meetingNumber,\r\n  //       role: role\r\n  //     })\r\n  //   }).then(res => res.json())\r\n  //   .then(response => {\r\n  //     startMeeting(response.signature)\r\n  //   }).catch(error => {\r\n  //     console.error(error)\r\n  //   })\r\n  // }\r\n\r\n  function createSignature(meetingNumber){\r\n    const iat = Math.round(new Date().getTime() / 1000) - 30;\r\n  const exp = iat + 60 * 60 * 2\r\n\r\n  const oHeader = { alg: 'HS256', typ: 'JWT' }\r\n\r\n  const oPayload = {\r\n    sdkKey: ZOOM_SDK_KEY,\r\n    mn: meetingNumber,\r\n    role: role,\r\n    iat: iat,\r\n    exp: exp,\r\n    appKey: ZOOM_SDK_SECRET,\r\n    tokenExp: iat + 60 * 60 * 2\r\n  }\r\n\r\n  const sHeader = JSON.stringify(oHeader)\r\n  const sPayload = JSON.stringify(oPayload)\r\n  const signature = KJUR.jws.JWS.sign('HS256', sHeader, sPayload, ZOOM_SDK_SECRET)\r\n  return signature;\r\n}\r\n\r\n  function startMeeting(signature, meetingID) {\r\n    document.getElementById('zmmtg-root').style.display = 'block'\r\n\r\n    ZoomMtg.init({\r\n      leaveUrl: leaveUrl,\r\n      success: (success) => {\r\n        console.log(success)\r\n\r\n        ZoomMtg.join({\r\n          signature: signature,\r\n          meetingNumber: meetingID,\r\n          userName: userName,\r\n          sdkKey: sdkKey,\r\n          userEmail: userEmail,\r\n          passWord: passWord,\r\n          tk: registrantToken,\r\n          success: (success) => {\r\n            console.log(success)\r\n            ZoomMtg.record({\r\n                record: true\r\n            });\r\n          },\r\n          error: (error) => {\r\n            console.log(error)\r\n          }\r\n        })\r\n\r\n      },\r\n      error: (error) => {\r\n        console.log(error)\r\n      }\r\n    })\r\n  }\r\n\r\n  \r\n\r\n\r\nfunction join_meeting(){\r\n  const signature = createSignature(meetingNumber);\r\n  startMeeting(signature, meetingNumber)\r\n\r\n}\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <main>\r\n        <h1>Zoom Meeting SDK Sample React</h1>\r\n        <button onClick={join_meeting}>Start Meeting</button>\r\n      </main>\r\n      {/* <main>\r\n  <div> \r\n    <button onClick={create_meeting}>Create Meeting</button>\r\n  </div>\r\n</main>\r\n<main>\r\n  <div> \r\n    <button onClick={get_meetings}>Get Meetings</button>\r\n  </div>\r\n</main> */}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n"]},"metadata":{},"sourceType":"module"}